<!DOCTYPE html>
<html>
	<body style="background-color: #1f1f1f; color: white; font-family: Arial, Helvetica, sans-serif;">


		<div style="display: inline;">
			<button id="new-message">Send Message</button>
			<button id="exit">Exit</button>
		</div>

		<br>
		<br>

		<img id="screen">
		
		<footer>
			<p>Copyright (c) 2021 Glowman554</p>
		</footer>
	</body>

	<head>

		<style>
			button {
				color: white;
				border-radius: 5%;
				background-color: #3f3f3f;
				text-align: center;
				text-decoration: none;
				display: inline-block;
				border: none;
				padding: 10px;
			}

			footer {
				width: 100%;
				height: 50px;
				position: absolute;
				bottom: 0;
				left: 0;
			} 
		</style>

		<script defer>

			async function send_message(chat, what) {
				const res = await fetch(window.location.href + "api/new-message?chat=" + chat + "&message=" + what);
				alert(await res.text());
			}

			document.getElementById("new-message").onclick = () => {
				const chat = prompt("Chat");
				const message = prompt("Message");

				send_message(chat, message);
			}

			document.getElementById("exit").onclick = () => {
				fetch(window.location.href + "api/exit").then(() => {
					alert("OK");
				});
			}

			setInterval(() => {

				var timestamp = new Date().getTime();

				document.getElementById("screen").src = window.location.href + "api/screen.png?t=" + timestamp;
			}, 1000);
		</script>

	</head>

</html>